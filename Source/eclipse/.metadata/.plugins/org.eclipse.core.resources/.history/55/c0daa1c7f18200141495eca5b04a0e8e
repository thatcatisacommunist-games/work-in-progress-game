package moedream.baseSystem;
import java.io.IOException;

import org.newdawn.slick.openal.*;
import org.newdawn.slick.util.ResourceLoader;


public class Sound {
	private Audio sound;
	float x, y, z;
	float startVolume;
	float pitch;
	boolean loop;
	
	public Sound(String file, String fileExtension)
	{
		try {
			if (fileExtension == "MP3")
				sound = AudioLoader.getAudio("MP3", ResourceLoader.getResourceAsStream(file));
			else if (fileExtension == "WAV")
				sound = AudioLoader.getAudio("WAV", ResourceLoader.getResourceAsStream(file));
			else if (fileExtension == "OGG")
				sound = AudioLoader.getAudio("OGG", ResourceLoader.getResourceAsStream(file));
			
		} 
		catch (IOException e) 
		{
				e.printStackTrace();
		}
	}
	public void swapSound(String file, String fileExtension)
	{
		try {
			if (fileExtension == "MP3")
				sound = AudioLoader.getAudio("MP3", ResourceLoader.getResourceAsStream(file));
			else if (fileExtension == "WAV")
				sound = AudioLoader.getAudio("WAV", ResourceLoader.getResourceAsStream(file));
			else if (fileExtension == "OGG")
				sound = AudioLoader.getAudio("OGG", ResourceLoader.getResourceAsStream(file));
			else
			{
				System.out.println("Could not load filetype: " + fileExtension);
			}
			
		} 
		catch (IOException e) 
		{
				e.printStackTrace();
		}
	}
	
	
	public void fadeOutMusic()
	{
		float fade = startVolume;
		float position = sound.getPosition();
		while (fade != 0.0f)
		{
			sound.stop();
			playSoundAsMusic(fade, pitch, loop);
			sound.setPosition(position);
			position = sound.getPosition();
			fade = fade - 0.1f;
		}
	}
	
	public void playSoundAsDimentionalEffect(float volume, float pitch, float posX, float posY, float posZ, boolean loop)
	{
		this.loop = loop;
		this.pitch = pitch;
		startVolume = volume;
		x = posX; y = posY; z = posZ;
		sound.playAsSoundEffect(volume, pitch, loop, posX, posY, posZ);
	}
	public void playSoundAsMusic(float volume, float pitch, boolean loop)
	{
		sound.playAsMusic(volume, pitch, loop);
	}
}

